<!DOCTYPE html>
<html> 
  <head>
    <title>pekepeke</title> 
  </head>
  <body>
    <canvas id="pekepeke"></canvas> 
  </body>
  <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
  <script>
  var programCode = function(processingInstance) {
    with (processingInstance) {
      size(400, 400); 
      frameRate(60);
        
var blocks=[];
var level=0;
var player;
var BG=[154, 228, 255];
var levelWidth=0;
var levelHeight=0;
var scene=1;
var rotation1=random(-360,360);
var rotation2=random(-360,360);
var rotation3=random(-360,360);
function Block(x,y,type){
    this.x=x;
    this.type=type;
    this.y=y;
    this.designY=y;
    this.Sz=100;
    this.portalConnection={
        isPortal:false,
        connectionX:this.x,
        connectionY:this.y
    };
    this.deathFloating=random(-360,360);
    this.timer=0;
    this.timerCount=0;
    this.detectBlocks=function(blocks){
        for(var i=0;i<blocks.length;i++){
            var b=blocks[i];
            switch(this.type){
                case 1:
                break;
                case 2:
                break;
                case 3:
                break;
                case 4:
                    this.portalConnection.isPortal=true;
                    if(this.type===b.type&&this.y===b.y&&this.x!==b.x){
                        this.portalConnection.connectionX=b.x;
                        this.portalConnection.connectionY=b.y;
                    }
                break;
            }
        }
    };
    this.animate=function(){
        switch(this.type){
            case 1:
            break;
            case 2:
                this.designY-=0.1*sin(this.deathFloating);
                this.deathFloating+=2;
            break;
            case 3:
            break;
            case 4:
            break;
            case 5:
            break;
            case 6:
                this.designY-=0.2*sin(this.deathFloating);
                this.deathFloating+=2*1;
                this.timer++;
                if(this.timer%120===0){
                    this.timerCount++;
                }
            break;
        }
    };
    this.show=function(){
        switch(this.type){
            case 1:
                noStroke();
            fill(BG[0]*1.2,BG[1]*1.2,BG[2]*1.2);
            beginShape();
                vertex(this.x-this.Sz/2,height*10);
                vertex(this.x-this.Sz/2,this.y+this.Sz/4);
                vertex(this.x,this.y+this.Sz/2);
                vertex(this.x,height*10);
            endShape(CLOSE);
            fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
            beginShape();
            vertex(this.x,height*10);
            vertex(this.x,this.y+this.Sz/2);
            vertex(this.x+this.Sz/2,this.y+this.Sz/4);
            vertex(this.x+this.Sz/2,height*10);
            endShape(CLOSE);
                strokeWeight(3);
                fill(25,35,48);
                stroke(25,35,48);
                strokeCap(SQUARE);
            beginShape();
                vertex(this.x-this.Sz/2,this.y);
                vertex(this.x,this.y-this.Sz/4);
                vertex(this.x+this.Sz/2,this.y);
                vertex(this.x,this.y+this.Sz/4);
            endShape(CLOSE);
            stroke(25*0.5,35*0.5,48*0.5);
            fill(25*0.5,35*0.5,48*0.5);
            beginShape();
                vertex(this.x-this.Sz/2,this.y);
                vertex(this.x,this.y+this.Sz/4);
                vertex(this.x+this.Sz/2,this.y);
                vertex(this.x+this.Sz/2,this.y+this.Sz/4);
                vertex(this.x,this.y+this.Sz/2);
                vertex(this.x-this.Sz/2,this.y+this.Sz/4);
            endShape(CLOSE);
            break;
            case 2:
                noStroke();
            fill(BG[0]*1.2,BG[1]*1.2,BG[2]*1.2);
            beginShape();
                vertex(this.x-this.Sz/2,height*10);
                vertex(this.x-this.Sz/2,this.designY+this.Sz/4);
                vertex(this.x,this.designY+this.Sz/2);
                vertex(this.x,height*10);
            endShape(CLOSE);
            fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
            beginShape();
            vertex(this.x,height*10);
            vertex(this.x,this.designY+this.Sz/2);
            vertex(this.x+this.Sz/2,this.designY+this.Sz/4);
            vertex(this.x+this.Sz/2,height*10);
            endShape(CLOSE);
                fill(25,35,48);
            beginShape();
                vertex(this.x-this.Sz/2,this.designY);
                vertex(this.x,this.designY-this.Sz/4);
                vertex(this.x+this.Sz/2,this.designY);
                vertex(this.x,this.designY+this.Sz/4);
            endShape(CLOSE);
            beginShape();
                vertex(this.x-this.Sz/2,this.designY);
                vertex(this.x,this.designY+this.Sz/4);
                vertex(this.x+this.Sz/2,this.designY);
                vertex(this.x+this.Sz/2,this.designY+this.Sz/4);
                vertex(this.x,this.designY+this.Sz/2);
                vertex(this.x-this.Sz/2,this.designY+this.Sz/4);
            endShape(CLOSE);
            fill(146, 69, 255,200);
            beginShape();
            vertex(this.x-this.Sz/2+10,this.designY);
            vertex(this.x,this.designY-this.Sz/2);
            vertex(this.x,this.designY+this.Sz/4-10);
            endShape(CLOSE);
            fill(146*0.8, 69*0.8, 255*0.8,200);
            beginShape();
            vertex(this.x,this.designY-this.Sz/2);
            vertex(this.x,this.designY+this.Sz/4-10);
            vertex(this.x+this.Sz/2-10,this.designY);
            endShape(CLOSE);
            break;
            case 3:
                noStroke();
            fill(BG[0]*1.2,BG[1]*1.2,BG[2]*1.2);
            beginShape();
                vertex(this.x-this.Sz/2,height*10);
                vertex(this.x-this.Sz/2,this.y+this.Sz/4);
                vertex(this.x,this.y+this.Sz/2);
                vertex(this.x,height*10);
            endShape(CLOSE);
            fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
            beginShape();
            vertex(this.x,height*10);
            vertex(this.x,this.y+this.Sz/2);
            vertex(this.x+this.Sz/2,this.y+this.Sz/4);
            vertex(this.x+this.Sz/2,height*10);
            endShape(CLOSE);
                strokeWeight(3);
                fill(25,35,48);
                stroke(25,35,48);
                strokeCap(SQUARE);
            beginShape();
                vertex(this.x-this.Sz/2,this.y);
                vertex(this.x,this.y-this.Sz/4);
                vertex(this.x+this.Sz/2,this.y);
                vertex(this.x,this.y+this.Sz/4);
            endShape(CLOSE);
            stroke(25*0.5,35*0.5,48*0.5);
            fill(25*0.5,35*0.5,48*0.5);
            beginShape();
                vertex(this.x-this.Sz/2,this.y);
                vertex(this.x,this.y+this.Sz/4);
                vertex(this.x+this.Sz/2,this.y);
                vertex(this.x+this.Sz/2,this.y+this.Sz/4);
                vertex(this.x,this.y+this.Sz/2);
                vertex(this.x-this.Sz/2,this.y+this.Sz/4);
            endShape(CLOSE);
            break;
            case 4:
                noStroke();
                fill(BG[0]*1.2,BG[1]*1.2,BG[2]*1.2);
                beginShape();
                    vertex(this.x-this.Sz/2,height*10);
                    vertex(this.x-this.Sz/2,this.y+this.Sz/4);
                    vertex(this.x,this.y+this.Sz/2);
                    vertex(this.x,height*10);
                endShape(CLOSE);
                fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
                beginShape();
                vertex(this.x,height*10);
                vertex(this.x,this.y+this.Sz/2+10);
                vertex(this.x+this.Sz/2,this.y+this.Sz/4+10);
                vertex(this.x+this.Sz/2,height*10);
                endShape(CLOSE);
                    strokeWeight(3);
                    fill(94, 255, 135);
                    stroke(94, 255, 135);
                    strokeCap(SQUARE);
                beginShape();
                    vertex(this.x-this.Sz/2,this.y);
                    vertex(this.x,this.y-this.Sz/4);
                    vertex(this.x+this.Sz/2,this.y);
                    vertex(this.x,this.y+this.Sz/4);
                endShape(CLOSE);
                stroke(25*0.5,35*0.5,48*0.5);
                fill(25*0.5,35*0.5,48*0.5);
                beginShape();
                    vertex(this.x-this.Sz/2,this.y);
                    vertex(this.x,this.y+this.Sz/4);
                    vertex(this.x+this.Sz/2,this.y);
                    vertex(this.x+this.Sz/2,this.y+this.Sz/4);
                    vertex(this.x,this.y+this.Sz/2);
                    vertex(this.x-this.Sz/2,this.y+this.Sz/4);
                endShape(CLOSE);
            break;
            case 5:
                noStroke();
                fill(BG[0]*1.2,BG[1]*1.2,BG[2]*1.2);
                beginShape();
                    vertex(this.x-this.Sz/2,height*10);
                    vertex(this.x-this.Sz/2,this.y+this.Sz/4);
                    vertex(this.x,this.y+this.Sz/2);
                    vertex(this.x,height*10);
                endShape(CLOSE);
                fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
                beginShape();
                vertex(this.x,height*10);
                vertex(this.x,this.y+this.Sz/2+10);
                vertex(this.x+this.Sz/2,this.y+this.Sz/4+10);
                vertex(this.x+this.Sz/2,height*10);
                endShape(CLOSE);
                    strokeWeight(3);
                    fill(255, 226, 72);
                    stroke(255, 226, 72);
                    strokeCap(SQUARE);
                beginShape();
                    vertex(this.x-this.Sz/2,this.y);
                    vertex(this.x,this.y-this.Sz/4);
                    vertex(this.x+this.Sz/2,this.y);
                    vertex(this.x,this.y+this.Sz/4);
                endShape(CLOSE);
                stroke(25*0.5,35*0.5,48*0.5);
                fill(25*0.5,35*0.5,48*0.5);
                beginShape();
                    vertex(this.x-this.Sz/2,this.y);
                    vertex(this.x,this.y+this.Sz/4);
                    vertex(this.x+this.Sz/2,this.y);
                    vertex(this.x+this.Sz/2,this.y+this.Sz/4);
                    vertex(this.x,this.y+this.Sz/2);
                    vertex(this.x-this.Sz/2,this.y+this.Sz/4);
                endShape(CLOSE);
            break;
            case 6:
                noStroke();
            fill(BG[0]*1.2,BG[1]*1.2,BG[2]*1.2);
            beginShape();
                vertex(this.x-this.Sz/2,height*10);
                vertex(this.x-this.Sz/2,this.y+this.Sz/4);
                vertex(this.x,this.y+this.Sz/2);
                vertex(this.x,height*10);
            endShape(CLOSE);
            fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
            beginShape();
            vertex(this.x,height*10);
            vertex(this.x,this.y+this.Sz/2);
            vertex(this.x+this.Sz/2,this.y+this.Sz/4);
            vertex(this.x+this.Sz/2,height*10);
            endShape(CLOSE);
                fill(25,35,48);
            beginShape();
                vertex(this.x-this.Sz/2,this.y);
                vertex(this.x,this.y-this.Sz/4);
                vertex(this.x+this.Sz/2,this.y);
                vertex(this.x,this.y+this.Sz/4);
            endShape(CLOSE);
            beginShape();
                vertex(this.x-this.Sz/2,this.y);
                vertex(this.x,this.y+this.Sz/4);
                vertex(this.x+this.Sz/2,this.y);
                vertex(this.x+this.Sz/2,this.y+this.Sz/4);
                vertex(this.x,this.y+this.Sz/2);
                vertex(this.x-this.Sz/2,this.y+this.Sz/4);
            endShape(CLOSE);
            if(this.timerCount%2===0){
                fill(146, 69, 255,200);
            }else{
                fill(146, 69, 255,100);
            }
            beginShape();
            vertex(this.x-this.Sz/2+10,this.designY);
            vertex(this.x,this.designY-this.Sz/2);
            vertex(this.x,this.designY+this.Sz/4-10);
            endShape(CLOSE);
            if(this.timerCount%2===0){
                fill(146*0.8, 69*0.8, 255*0.8,200);
            }else{
                fill(146*0.8, 69*0.8, 255*0.8,100);
            }
            beginShape();
            vertex(this.x,this.designY-this.Sz/2);
            vertex(this.x,this.designY+this.Sz/4-10);
            vertex(this.x+this.Sz/2-10,this.designY);
            endShape(CLOSE);
            break;
        }
    };
}
function Load(set,map){
    for(var i=0;i<map.length;i++){
        for(var j=0;j<map[i].length;j++){
            var id=map[i][j];
            switch(id){
                case 'B':
                    set.push(new Block(j*100-i*50,i*25,1));
                break;
                case 'X':
                    set.push(new Block(j*100-i*50,i*25,2));
                break;
                case 'x':
                    set.push(new Block(j*100-i*50,i*25,6));
                break;
                case 'O':
                    set.push(new Block(j*100-i*50,i*25,3));
                break;
                case 'T':
                    set.push(new Block(j*100-i*50,i*25,4));
                break;
                case 'P':
                    set.push(new Block(j*100-i*50,i*25,1));
                    player.respawn.x=j*100-i*50+50;
                    player.respawn.y=i*25+75;
                    player.preAntiX=j*100-i*50+50;
                    player.preAntiY=i*25+75;
                    player.antiX=j*100-i*50+50;
                    player.antiY=i*25+75;
                    player.x=j*100-i*50+50;
                    player.y=i*25+75;
                break;
                case 'S':
                    set.push(new Block(j*100-i*50,i*25,5));
                break;
            }
        }
    }
}
function Erase(set){
    set.length=0;
}
function Player(x,y){
    this.x=x;
    this.y=y;
    this.antiX=this.x;
    this.antiY=this.y;
    this.preAntiX=this.x;
    this.preAntiY=this.y;
    this.Sz=70;
    this.onBlock=false;
    this.respawn={
        x:this.x,
        y:this.y
    };
    var timer=0;
    this.hitPortal=false;
    this.update=function(blocks){
        this.x=lerp(this.x,this.antiX,0.2);
        this.y=lerp(this.y,this.antiY,0.2);
        this.onBlock=false;
        this.hitPortal=false;
        this.detectBlocks(blocks);
        if(!this.onBlock){
        this.antiX=this.preAntiX;
        this.antiY=this.preAntiY;
        } 
        if(dist(this.x,this.y,this.antiX,this.antiY)<1){
            this.x=this.antiX;
            this.y=this.antiY;
        }
        //console.log(this.x,this.y);
    };
    this.detectBlocks=function(blocks){
        for(var i=0;i<blocks.length;i++){
            var b=blocks[i];
            if(dist(this.x-50,this.y-70,b.x,b.y)<40){
                this.onBlock=true;//Good. Let's continue
                switch(b.type){
                    case 1:
                    break;
                    case 2:
                        if(dist(this.x-50,this.y-70,b.x,b.y)<30){
                            this.antiX=this.respawn.x;
                            this.antiY=this.respawn.y;
                        }
                    break;
                    case 3:
                        this.hitPortal=true;
                        timer=0;
                    break;
                    case 4:
                        timer++;
                        if(timer>120){
                            timer=0;
                            this.x=b.portalConnection.connectionX+50;
                            this.y=b.portalConnection.connectionY+75;
                            this.antiX=b.portalConnection.connectionX+50;
                            this.antiY=b.portalConnection.connectionY+75;
                        }
                    break;
                    case 5:
                        this.onBlock=false;
                    break;
                    case 6:
                        if(b.timerCount%2===0){
                            this.antiX=this.respawn.x;
                            this.antiY=this.respawn.y;
                        }
                    break;
                }
            }
        }
    };
    this.show=function(){
        strokeWeight(3);
        fill(25,35,48);
        stroke(255);
        strokeCap(SQUARE);
        beginShape();
            vertex(this.x-this.Sz/2-50,this.y-107);
            vertex(this.x-50,this.y+this.Sz/4-107);
            vertex(this.x+this.Sz/2-50,this.y-107);
            vertex(this.x-50,this.y-this.Sz/4-107);
        endShape(CLOSE);
        beginShape();
        vertex(this.x-this.Sz/2-50,this.y-107);
        vertex(this.x-50,this.y+this.Sz/4-107);
        vertex(this.x-50,this.y+this.Sz/4+this.Sz/2-107);
        vertex(this.x-this.Sz/2-50,this.y+this.Sz/2-107);
        endShape(CLOSE);
        beginShape();
        vertex(this.x-50,this.y+this.Sz/4+this.Sz/2-107);
        vertex(this.x+this.Sz/2-50,this.y+this.Sz/2-107);
        vertex(this.x+this.Sz/2-50,this.y-107);
        vertex(this.x-50,this.y+this.Sz/4-107);
        endShape(CLOSE);
        //ellipse(this.x-50,this.y-50,3,3);
    };
}
var worldMap=[
    [
        'P   ',
        ' B  ',
        '  B ',
        '   O',
    ],
    [
        'P   ',
        ' B  ',
        '  B ',
        '   B',
        '   B',
        '   B',
        '   O',
    ],
    [
        'X   ',
        'BB  ',
        'BBB ',
        'B XB',
        'O XB',
        'X BB',
        '  PB',
    ],
    [
        'TXXXXXXT',
        'BXXXXXXB',
        'BXXXXXXB',
        'BXXXXXXB',
        'BXXXXXXB',
        'OXXXXXXP',
    ],
    [
        '                      O',
        '   T         T        B',
        '  XB         BB       B',
        '  BB         BBB      B',
        '  BB          BBB     B',
        '  B            BB     B',
        '  B             T     T',
        '  T     T              ',
        '        B              ',
        '        B              ',
        'T    T  B              ',
        'B     B B              ',
        'B      BB              ',
        'B       B              ',
        'P                      ',
    ],
    [
        'B  ',
        'BB ',
        'BSB',
        'BSB',
        'OSB',
        ' SB',
        '  P',
    ],
    [
        '         T            T',
        '         BB            ',
        '         BBB           ',
        '         BBBB          ',
        'TS       TBPBB        O',
        'ST        BBBT        B',
        '           BBB        B',
        '            BB        B',
        '             T        T',
    ],
    [
        'TXXXXXXXT',
        'XOSXXBBBB',
        'XSSXXBBBB',
        'XBSBBBXBX',
        'XBBBBBBBX',
        'XPXBXXXBX',
    ],
    [
        '       B    ',
        ' B SS       ',
        ' BBPO       ',
        ' B BST     T',
        '  B        B',
        'B T  T BXBXB',
        '      BBBBBB',
        '       BXBXB',
    ],
    [
        'O   ',
        'Bx  ',
        'Bxx ',
        'BxxB',
        'BxxB',
        ' xxB',
        '  xB',
        '   P',
    ],
    [
        'P     ',
        ' x    ',
        '  B   ',
        '   x  ',
        '    B ',
        '     x',
        '     B',
        '     x',
        '     B',
        '     x',
        '     B',
        '     O',
    ],
    [
        'O    ',
        'BB   ',
        'XBB  ',
        'XXBB ',
        'XXxBB',
        'XXXxB',
        'BXxBX',
        'BBxxX',
        ' BBXX',
        '  PBX',
        '   BB',
        '    B',
    ],
    [
        'P    ',
        ' x   ',
        '  x  ',
        '   x ',
        '    O',        
    ],
    [
        'P   ',
        ' x  ',
        '  x ',
        '   B',
        '   x',
        '   x',
        '   O',
    ],
    [
        'P    ',
        ' x   ',
        'O x  ',
        'B  x ',
        'B   B',
        ' x  x',
        '  x x',
        '   xx',
        '    B',
    ],
    [],
];
var x=0;
var y=0;
var antiX=0;
var antiY=0;
var rand1X=random(-50,50);
var rand2X=random(-50,50);
var Antirand1X=random(-50,50);
var Antirand2X=random(-50,50);
var rand1Y=random(-50,50);
var rand2Y=random(-50,50);
var Antirand1Y=random(-50,50);
var Antirand2Y=random(-50,50);
var cam={
  x:0,
  y:0
};
function Game(){
  background(BG[0],BG[1],BG[2]);
  pushMatrix();
  translate(width/2,height/2);
  rotate(7*sin(rotation1));
  rotation1+=1;
  fill(BG[0]*1.05,BG[1]*1.05,BG[2]*1.05);
  rect(-width/5,-height,2*width/5,height*3);
  popMatrix();
  pushMatrix();
  translate(width/2,height/2);
  rotate(7*sin(rotation2));
  rotation2+=1;
  fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
  rect(-width/10,-height,width/5,height*3);
  popMatrix();
  pushMatrix();
  translate(width/2,height/2);
  rotate(7*sin(rotation3));
  rotation3+=1;
  fill(BG[0]*1.3,BG[1]*1.3,BG[2]*1.3);
  rect(-width/20,-height,width/10,height*3);
  popMatrix();
  noStroke();
    pushMatrix();
  translate(cam.x,cam.y);
  cam.x=lerp(cam.x,width/2-player.x,0.05);
  cam.y=lerp(cam.y,height/2-player.y,0.05);
  for(var i=0;i<blocks.length;i++){
    if(blocks[i].y-player.antiY<=-50){
      blocks[i].animate();
      blocks[i].detectBlocks(blocks);
      blocks[i].show();
    }
  }
  player.update(blocks);
  player.show();
  for(var i=0;i<blocks.length;i++){
    if(blocks[i].y-player.antiY>-50){
      blocks[i].animate();
      blocks[i].detectBlocks(blocks);
      blocks[i].show();
    }
  }
  for(var i=0;i<blocks.length;i++){
    var b=blocks[i];
    if(b.type===3){
      antiX=b.x;
      antiY=b.y;
    }
    if(b.type===4){
      noStroke();
      fill(94, 255, 135,100);
      beginShape();
      vertex(b.x-b.Sz/2,-height*2);
      vertex(b.x-b.Sz/2,b.y);
      vertex(b.x,b.y+b.Sz/4);
      vertex(b.x+b.Sz/2,b.y);
      vertex(b.x+b.Sz/2,-height*2);
      endShape(CLOSE);
    }
    if(b.type===5){
      noStroke();
      fill(255, 226, 72,100);
      beginShape();
      vertex(b.x-b.Sz/2,-height*2);
      vertex(b.x-b.Sz/2,b.y);
      vertex(b.x,b.y+b.Sz/4);
      vertex(b.x+b.Sz/2,b.y);
      vertex(b.x+b.Sz/2,-height*2);
      endShape(CLOSE);
    }
  }
  noStroke();
  fill(131, 255, 137);
  ellipse(x,y-25,50,50);
  x=lerp(x,antiX,0.05);
  y=lerp(y,antiY,0.05);
  popMatrix();
  for(var i=0;i<worldMap[level].length;i++){
      levelWidth=worldMap[level][i].length;
  }
  levelHeight=worldMap[level].length;
  if(player.hitPortal){
    Erase(blocks);
    level++;
    Load(blocks,worldMap[level]);
  }
  if(level>14){
    scene=2;
  }
}
function Ending(){
  background(BG[0],BG[1],BG[2]);
  noStroke();
  pushMatrix();
  translate(width/2,height/2);
  rotate(sin(rotation1));
  rotation1+=1;
  fill(BG[0]*1.05,BG[1]*1.05,BG[2]*1.05);
  rect(-width/5,-height,2*width/5,height*3);
  popMatrix();
  pushMatrix();
  translate(width/2,height/2);
  rotate(sin(rotation2));
  rotation2+=1;
  fill(BG[0]*1.1,BG[1]*1.1,BG[2]*1.1);
  rect(-width/10,-height,width/5,height*3);
  popMatrix();
  pushMatrix();
  translate(width/2,height/2);
  rotate(sin(rotation3));
  rotation3+=1;
  fill(BG[0]*1.3,BG[1]*1.3,BG[2]*1.3);
  rect(-width/20,-height,width/10,height*3);
  popMatrix();
  textAlign(CENTER,CENTER);
  textFont(createFont('Arial Black'),37);
  fill(0,50);
  text("ISO",width/2+rand1X,height/2-63+rand1Y);
  text("By Karllr and Juanster",width/2+rand1X,height/2+rand1Y);
  text("Please Reload to play again", width/2+rand1X,height/2+37+rand1Y);
  fill(0,100);
  text("ISO",width/2+rand2X,height/2-63+rand2Y);
  text("By Karllr and Juanster",width/2+rand2X,height/2+rand2Y);
  text("Please Reload to play again", width/2+rand2X,height/2+37+rand2Y);
  fill(0);
  text("ISO",width/2,height/2-63);
  text("By Karllr and Juanster",width/2,height/2);
  text("Please Reload to play again", width/2,height/2+37);
  rand1X=lerp(rand1X,Antirand1X,0.05);
  rand2X=lerp(rand2X,Antirand2X,0.05);
  rand1Y=lerp(rand1Y,Antirand1Y,0.05);
  rand2Y=lerp(rand2Y,Antirand2Y,0.05);
  if(frameCount%60===0){
    Antirand1X=random(-50,50);
    Antirand2X=random(-50,50);
    Antirand1Y=random(-50,50);
    Antirand2Y=random(-50,50);
  }
}
var song;
var fps=120;
//var font;
//function setup() {
  //createCanvas(windowWidth, windowHeight);
  //song=loadSound('Creo-Reflections.mp3',ok);
  player=new Player(0,0);
  Load(blocks,worldMap[level]);
  //font=loadFont('Poppins-Bold.ttf');
//}
function ok(){
  //song.play();
}
var BG=[154, 228, 255];
function draw() {
  frameRate(fps);
  background(BG[0],BG[1],BG[2]);
  switch(scene){
    case 1:
      Game();
    break;
    case 2:
      Ending();
    break;
  }
  BG[0]=lerp(BG[0],154,0.01);
  BG[1]=lerp(BG[1],228,0.01);
  BG[2]=lerp(BG[2],255,0.01);
  if(frameCount%120===0){
    BG[0]=225*0.9;
    BG[1]=164*0.9;
    BG[2]=245*0.9;
  }
  //song.setLoop(true);
  
}
function keyPressed(){
  if(keyCode===UP){
    player.antiX+=50;
    player.antiY-=25;
  }
  if(keyCode===DOWN){
    player.antiX-=50;
    player.antiY+=25;
  }
  if(keyCode===LEFT){
    player.antiX-=50;
    player.antiY-=25;
  }
  if(keyCode===RIGHT){
    player.antiX+=50;
    player.antiY+=25;
  }
  if(keyCode===82){
    player.antiX=player.respawn.x;
    player.antiY=player.respawn.y;
    player.yvel=0;
  }
  if(round(player.x)%50===0&&round(player.y)%25===0){
    player.preAntiX=player.x;
    player.preAntiY=player.y;
  }
}
}};

  // Get the canvas that ProcessingJS will use
  var canvas = document.getElementById("pekepeke"); 
  // Pass the function to ProcessingJS constructor
  var processingInstance = new Processing(canvas, programCode); 
  </script>
</html>
